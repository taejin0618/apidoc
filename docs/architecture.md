# ì•„í‚¤í…ì²˜ ì„¤ëª…

## ğŸ“ ê°œìš”

API Doc ManagerëŠ” **ê¸°ëŠ¥ë³„ ëª¨ë“ˆ êµ¬ì¡°**ë¡œ ì„¤ê³„ëœ FastAPI ê¸°ë°˜ì˜ REST API ì„œë²„ì…ë‹ˆë‹¤.

ê° ê¸°ëŠ¥ì´ **ë…ë¦½ì ì¸ ëª¨ë“ˆ**ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆì–´ í™•ì¥ê³¼ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•©ë‹ˆë‹¤.

---

## ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          í´ë¼ì´ì–¸íŠ¸ (í”„ë¡ íŠ¸ì—”ë“œ)              â”‚
â”‚   HTML / JavaScript / Vue / React ë“±        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/REST
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ (app/main.py)   â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ë¯¸ë“¤ì›¨ì–´ & ì˜ˆì™¸ ì²˜ë¦¬                 â”‚  â”‚
â”‚  â”‚  - CORS, GZip, Security, RateLimit  â”‚  â”‚
â”‚  â”‚  - ì—ëŸ¬ í•¸ë“¤ë§, ë¡œê¹…                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ë¼ìš°í„° ë° ì—”ë“œí¬ì¸íŠ¸                  â”‚  â”‚
â”‚  â”‚  - /api/urls (URL ê´€ë¦¬)              â”‚  â”‚
â”‚  â”‚  - /api/versions (ë²„ì „ ê´€ë¦¬)         â”‚  â”‚
â”‚  â”‚  - /api/swagger (Swagger ì„œë¹„ìŠ¤)     â”‚  â”‚
â”‚  â”‚  - /pages (HTML í˜ì´ì§€)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ê¸°ëŠ¥ ëª¨ë“ˆ                             â”‚  â”‚
â”‚  â”‚  - urls/ (URL CRUD)                 â”‚  â”‚
â”‚  â”‚  - versions/ (ë²„ì „ ê´€ë¦¬ & Diff)      â”‚  â”‚
â”‚  â”‚  - swagger/ (Swagger ì²˜ë¦¬)          â”‚  â”‚
â”‚  â”‚  - common/ (ê³µí†µ ê¸°ëŠ¥)              â”‚  â”‚
â”‚  â”‚  - pages/ (HTML ë¼ìš°íŒ…)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB (ë°ì´í„° ì €ì¥ì†Œ)                    â”‚
â”‚  - apiurls ì»¬ë ‰ì…˜ (URL ì •ë³´)               â”‚
â”‚  - apiversions ì»¬ë ‰ì…˜ (ë²„ì „ ë°ì´í„°)        â”‚
â”‚  - auditlogs ì»¬ë ‰ì…˜ (ê°ì‹œ ë¡œê·¸)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ì™¸ë¶€ ì„œë¹„ìŠ¤
       â”‚
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Swagger URL ì„œë²„    â”‚
  â”‚ (ì™¸ë¶€ API)         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Slack API           â”‚
  â”‚ (ì„ íƒì‚¬í•­ ì•Œë¦¼)      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
apidocpython/
â”‚
â”œâ”€â”€ app/                          # ğŸ‘ˆ FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ main.py                   # ğŸšª ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ common/                   # ğŸ› ï¸ ê³µí†µ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”œâ”€â”€ database.py
â”‚   â”‚   â”œâ”€â”€ dependencies.py
â”‚   â”‚   â”œâ”€â”€ errors.py
â”‚   â”‚   â”œâ”€â”€ responses.py
â”‚   â”‚   â”œâ”€â”€ utils.py
â”‚   â”‚   â””â”€â”€ middlewares/
â”‚   â”‚
â”‚   â”œâ”€â”€ urls/                     # ğŸ”— URL ê´€ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ routes.py
â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â”œâ”€â”€ versions/                 # ğŸ“Š ë²„ì „ ê´€ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ routes.py
â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â”œâ”€â”€ service.py
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â”œâ”€â”€ swagger/                  # ğŸ“„ Swagger ì„œë¹„ìŠ¤ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ routes.py
â”‚   â”‚   â”œâ”€â”€ service.py
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                    # ğŸŒ HTML í˜ì´ì§€ ë¼ìš°íŒ…
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py
â”‚   â”‚
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ health.py
â”‚
â”œâ”€â”€ public/                       # ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì •ì  ìì‚°
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ icons/
â”‚
â”œâ”€â”€ views/                        # ğŸŒ HTML í…œí”Œë¦¿
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ api-detail.html
â”‚   â””â”€â”€ version-compare.html
â”‚
â”œâ”€â”€ scripts/                      # ğŸ“œ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup.sh
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ docs/                         # ğŸ“š ë¬¸ì„œ
â”‚   â”œâ”€â”€ SETUP.md
â”‚   â”œâ”€â”€ API_GUIDE.md
â”‚   â””â”€â”€ ARCHITECTURE.md
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### 1. ìƒˆ URL ë“±ë¡ íë¦„

```
í´ë¼ì´ì–¸íŠ¸ (í”„ë¡ íŠ¸ì—”ë“œ)
    â”‚ 1. POST /api/urls
    â”‚ {name, url, group, owner, ...}
    â–¼
POST /urls ì—”ë“œí¬ì¸íŠ¸
    â”‚ 2. ì…ë ¥ê°’ ê²€ì¦
    â”‚ 3. MongoDBì— ì €ì¥
    â–¼
parse_and_save_swagger() ë¹„ë™ê¸° ì‘ì—…
    â”‚ 4. ì™¸ë¶€ Swagger URL ë‹¤ìš´ë¡œë“œ
    â”‚ 5. ìœ íš¨ì„± ê²€ì¦
    â”‚ 6. ë²„ì „ ìƒì„± (v1/1)
    â–¼
ì‘ë‹µ ë°˜í™˜
    {success: true, data: {...}}
```

---

## ğŸ’¾ ë°ì´í„° ëª¨ë¸

### MongoDB ìŠ¤í‚¤ë§ˆ

#### apiurls ì»¬ë ‰ì…˜

```javascript
{
  _id: ObjectId(),
  name: "CEO Service API",
  url: "http://api.example.com/swagger.json",
  group: "backend",
  owner: "dev@example.com",
  description: "ê²½ì˜ì§„ ì„œë¹„ìŠ¤ API",
  isActive: true,
  versionCount: 5,
  lastFetchedAt: ISODate(),
  lastFetchStatus: "success",
  errorMessage: null,
  createdAt: ISODate(),
  updatedAt: ISODate()
}
```

#### apiversions ì»¬ë ‰ì…˜

```javascript
{
  _id: ObjectId(),
  urlId: ObjectId(),
  versionId: "v1",
  versionNumber: 3,
  majorVersion: "v1",
  timestamp: ISODate(),
  revisionCount: 2,
  swaggerJson: {...},
  changes: [...],
  changeHistory: [...],
  endpointCount: 45,
  summary: "3ê°œ ì¶”ê°€, 1ê°œ ì‚­ì œ"
}
```

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

```
GET     /api/urls
POST    /api/urls
GET     /api/urls/{id}
PUT     /api/urls/{id}
DELETE  /api/urls/{id}
PATCH   /api/urls/{id}/activate
POST    /api/urls/{id}/fetch

GET     /api/urls/{id}/versions
GET     /api/urls/{id}/versions/{vid}
GET     /api/urls/{id}/versions/{v1}/compare/{v2}
GET     /api/versions/latest/{count}

GET     /swagger.json
GET     /health
```

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024ë…„ 1ì›” 20ì¼
