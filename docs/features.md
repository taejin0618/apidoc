# í•µì‹¬ ê¸°ëŠ¥

> ë²„ì „ ê´€ë¦¬, ë³€ê²½ì‚¬í•­ ë¶„ì„, UI/UX ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…

## 1. ë²„ì „ ê´€ë¦¬ ì „ëµ

### 1.1 ë©”ì´ì € ë²„ì „ ì¶”ì¶œ

ì‹œìŠ¤í…œì€ Swagger JSONì˜ pathsì—ì„œ ìë™ìœ¼ë¡œ ë©”ì´ì € ë²„ì „ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.

**ì¶”ì¶œ íŒ¨í„´:**

```javascript
// ì •ê·œì‹: /\/v(\d+)(\/|$)/i
// ì˜ˆì‹œ:
'/v1/users'      â†’ 'v1'
'/api/v2/orders' â†’ 'v2'
'/users'         â†’ 'v1' (ê¸°ë³¸ê°’)
```

**ì¶”ì¶œ ìš°ì„ ìˆœìœ„:**

1. pathsì˜ ì²« ë²ˆì§¸ ê²½ë¡œì—ì„œ `/v1/`, `/v2/` íŒ¨í„´ ê²€ìƒ‰
2. íŒ¨í„´ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ `v1` ì‚¬ìš©

### 1.2 ë²„ì „ ìƒì„± ë¡œì§

```
                    Swagger JSON Fetch
                           â”‚
                           â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ extractMajorVersion â”‚
                 â”‚     (v1, v2 ì¶”ì¶œ)    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                           â”‚
              â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ë™ì¼ majorVersionâ”‚         â”‚ ìƒˆ majorVersion â”‚
    â”‚     ì¡´ì¬?        â”‚         â”‚     ë°œê²¬?       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                           â”‚
             â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ê¸°ì¡´ ë²„ì „ ì—…ë°ì´íŠ¸ â”‚         â”‚  ìƒˆ ë²„ì „ ìƒì„±    â”‚
    â”‚ - revisionCount++ â”‚         â”‚ - versionNumber++â”‚
    â”‚ - changes ëˆ„ì     â”‚         â”‚ - changes ì €ì¥   â”‚
    â”‚ - changeHistory   â”‚         â”‚ - previousVersionIdâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ë²„ì „ ì—…ë°ì´íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤ 1: ë™ì¼ ë©”ì´ì € ë²„ì „ì—ì„œ ë³€ê²½ ë°œìƒ**

```
ê¸°ì¡´: v1 (versionNumber: 1, revisionCount: 1)
     â†“ Swagger JSON ë³€ê²½ ê°ì§€
ê²°ê³¼: v1 (versionNumber: 1, revisionCount: 2)
     - changes ë°°ì—´ì— ìƒˆ ë³€ê²½ì‚¬í•­ ì¶”ê°€
     - changeHistoryì— ì—…ë°ì´íŠ¸ ê¸°ë¡ ì¶”ê°€
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒˆ ë©”ì´ì € ë²„ì „ ë°œê²¬**

```
ê¸°ì¡´: v1 (versionNumber: 1)
     â†“ /v2/ íŒ¨í„´ ê°ì§€
ê²°ê³¼: v2 (versionNumber: 2)
     - ìƒˆ ApiVersion ë¬¸ì„œ ìƒì„±
     - previousVersionIdì— v1 ì°¸ì¡°
```

**ì‹œë‚˜ë¦¬ì˜¤ 3: ë³€ê²½ì‚¬í•­ ì—†ìŒ**

```
ê¸°ì¡´: v1 (versionNumber: 1)
     â†“ Swagger JSON ë™ì¼
ê²°ê³¼: ë²„ì „ ìœ ì§€ (lastFetchedAtë§Œ ì—…ë°ì´íŠ¸)
```

### 1.4 ë³€ê²½ì‚¬í•­ ëˆ„ì 

ë™ì¼ ë©”ì´ì € ë²„ì „ì—ì„œ ì—¬ëŸ¬ ë²ˆ fetch ì‹œ:

```javascript
changes: [
  {
    type: 'added',
    path: 'POST /api/users',
    recordedAt: '2024-11-25T10:00:00Z'  // ì²« ë²ˆì§¸ ë³€ê²½
  },
  {
    type: 'modified',
    path: 'GET /api/users',
    recordedAt: '2024-11-26T10:00:00Z'  // ë‘ ë²ˆì§¸ ë³€ê²½
  },
  {
    type: 'removed',
    path: 'DELETE /api/users/{id}',
    recordedAt: '2024-11-27T10:00:00Z'  // ì„¸ ë²ˆì§¸ ë³€ê²½
  }
]
```

`recordedAt` í•„ë“œë¡œ ë³€ê²½ì‚¬í•­ ë°œìƒ ì‹œì ì„ ì¶”ì í•©ë‹ˆë‹¤.

---

## 2. ë³€ê²½ì‚¬í•­ ë¶„ì„ (diffService)

### 2.1 ë¹„êµ ì˜ì—­

ì‹œìŠ¤í…œì€ 15ê°œ ì˜ì—­ì—ì„œ OpenAPI/Swagger ë¬¸ì„œë¥¼ ë¹„êµí•©ë‹ˆë‹¤.

| # | ì˜ì—­ | ì„¤ëª… | ì‹¬ê°ë„ |
|---|------|------|--------|
| 1 | **Endpoints** | ê²½ë¡œ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • | ğŸ”´ high |
| 2 | **Parameters** | íŒŒë¼ë¯¸í„° ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • | ğŸŸ¡ medium |
| 3 | **Request Body** | ìš”ì²­ ë³¸ë¬¸ ë³€ê²½ | ğŸŸ¡ medium |
| 4 | **Responses** | HTTP ì‘ë‹µ ì½”ë“œ ë° ìŠ¤í‚¤ë§ˆ | ğŸŸ¢ low |
| 5 | **Schemas** | components.schemas ë³€ê²½ | ğŸŸ¡ medium |
| 6 | **Security** | ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ | ğŸ”´ high |
| 7 | **Tags** | API íƒœê·¸ | ğŸŸ¢ low |
| 8 | **Info** | ì œëª©, ì„¤ëª…, ë²„ì „ ì •ë³´ | ğŸŸ¢ low |
| 9 | **Servers** | ì„œë²„ URL ë³€ê²½ | ğŸŸ¡ medium |
| 10 | **Security Schemes** | ì¸ì¦ ë°©ì‹ ì •ì˜ | ğŸ”´ high |
| 11 | **Headers** | ì»¤ìŠ¤í…€ í—¤ë” ì •ì˜ | ğŸŸ¢ low |
| 12 | **Examples** | ì˜ˆì œ ì •ì˜ | ğŸŸ¢ low |
| 13 | **Links** | OpenAPI ë§í¬ | ğŸŸ¢ low |
| 14 | **Callbacks** | ì½œë°± ì •ì˜ | ğŸŸ¡ medium |
| 15 | **External Docs** | ì™¸ë¶€ ë¬¸ì„œ ë§í¬ | ğŸŸ¢ low |

### 2.2 ë³€ê²½ ìœ í˜•

| ìœ í˜• | ì•„ì´ì½˜ | ì„¤ëª… |
|------|--------|------|
| `added` | ğŸŸ¢ | ìƒˆë¡œ ì¶”ê°€ëœ í•­ëª© |
| `removed` | ğŸ”´ | ì‚­ì œëœ í•­ëª© |
| `modified` | ğŸŸ  | ë³€ê²½ëœ í•­ëª© |

### 2.3 ì‹¬ê°ë„ ë ˆë²¨

**ğŸ”´ High (ë†’ìŒ)**

| ì¡°ê±´ | ì˜ˆì‹œ |
|------|------|
| ìƒˆ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ | `POST /api/users` ì¶”ê°€ |
| ì—”ë“œí¬ì¸íŠ¸ ì‚­ì œ | `DELETE /api/orders/{id}` ì‚­ì œ |
| í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì¶”ê°€/ì‚­ì œ | `required: true` íŒŒë¼ë¯¸í„° |
| ê²½ë¡œ íŒŒë¼ë¯¸í„° ë³€ê²½ | `{userId}` â†’ `{id}` |
| ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ ë³€ê²½ | OAuth ë²”ìœ„ ë³€ê²½ |

**ğŸŸ¡ Medium (ì¤‘ê°„)**

| ì¡°ê±´ | ì˜ˆì‹œ |
|------|------|
| ì„ íƒ íŒŒë¼ë¯¸í„° ë³€ê²½ | `required: false` íŒŒë¼ë¯¸í„° |
| RequestBody ë³€ê²½ | ìŠ¤í‚¤ë§ˆ í•„ë“œ ì¶”ê°€/ì‚­ì œ |
| Schema ë³€ê²½ | ë°ì´í„° íƒ€ì… ë³€ê²½ |
| ì„œë²„ URL ë³€ê²½ | ê¸°ë³¸ URL ë³€ê²½ |

**ğŸŸ¢ Low (ë‚®ìŒ)**

| ì¡°ê±´ | ì˜ˆì‹œ |
|------|------|
| ì„¤ëª… ë³€ê²½ | description, summary ìˆ˜ì • |
| ì‘ë‹µ ì½”ë“œ ë³€ê²½ | 404 ì‘ë‹µ ì¶”ê°€ |
| íƒœê·¸ ë³€ê²½ | íƒœê·¸ ì´ë¦„ ë³€ê²½ |
| ì˜ˆì œ ë³€ê²½ | ì˜ˆì œ ê°’ ìˆ˜ì • |

### 2.4 ë³€ê²½ì‚¬í•­ êµ¬ì¡°

```javascript
{
  type: 'modified',           // added | removed | modified
  category: 'parameter',      // ì¹´í…Œê³ ë¦¬
  path: 'GET /api/users',     // HTTP ë©”ì„œë“œ + ê²½ë¡œ
  field: 'limit',             // ë³€ê²½ëœ í•„ë“œëª…
  oldValue: {                 // ì´ì „ ê°’
    type: 'integer',
    default: 10
  },
  newValue: {                 // ìƒˆ ê°’
    type: 'integer',
    default: 20
  },
  description: 'limit íŒŒë¼ë¯¸í„° ê¸°ë³¸ê°’ ë³€ê²½ (10 â†’ 20)',
  severity: 'low',
  recordedAt: '2024-11-27T10:00:00.000Z'
}
```

### 2.5 Swagger 2.0 í˜¸í™˜

ì‹œìŠ¤í…œì€ OpenAPI 3.0ê³¼ Swagger 2.0ì„ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.

| OpenAPI 3.0 | Swagger 2.0 | ìš©ë„ |
|-------------|-------------|------|
| `openapi: "3.0.0"` | `swagger: "2.0"` | ë²„ì „ ì‹ë³„ |
| `components.schemas` | `definitions` | ìŠ¤í‚¤ë§ˆ ì •ì˜ |
| `components.securitySchemes` | `securityDefinitions` | ë³´ì•ˆ ì •ì˜ |
| `servers[].url` | `host` + `basePath` | ì„œë²„ URL |
| `requestBody` | body íŒŒë¼ë¯¸í„° | ìš”ì²­ ë³¸ë¬¸ |

---

## 3. UI/UX ê¸°ëŠ¥

### 3.1 ìŠ¤ì¼ˆë ˆí†¤ UI

ë°ì´í„° ë¡œë”© ì¤‘ í‘œì‹œë˜ëŠ” í”Œë ˆì´ìŠ¤í™€ë”ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“                   â”‚  â† íƒ€ì´í‹€ ìŠ¤ì¼ˆë ˆí†¤
â”‚                              â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚  â† ì½˜í…ì¸  ìŠ¤ì¼ˆë ˆí†¤
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚                              â”‚
â”‚ â–’â–’â–’â–’â–’â–’â–’  â–’â–’â–’â–’â–’â–’â–’             â”‚  â† ë²„íŠ¼ ìŠ¤ì¼ˆë ˆí†¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•:**
- í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ë¡œë”© ìƒíƒœ í‘œí˜„
- 4ê°œì˜ ë”ë¯¸ ì¹´ë“œ ê¸°ë³¸ í‘œì‹œ
- ë°ì´í„° ë¡œë“œ ì™„ë£Œ ì‹œ ìˆœì°¨ì  í˜ì´ë“œ ì•„ì›ƒ (50ms ê°„ê²©)

### 3.2 ë™ì  ê·¸ë£¹ ìƒ‰ìƒ

ê° ê·¸ë£¹ì€ ê³ ìœ í•œ ìƒ‰ìƒìœ¼ë¡œ ì‹œê°ì  êµ¬ë¶„ë©ë‹ˆë‹¤.

**ì‚¬ì „ ì •ì˜ ìƒ‰ìƒ:**

| ê·¸ë£¹ | ìƒ‰ìƒ | HEX |
|------|------|-----|
| backend | íŒŒë‘ | #3B82F6 |
| frontend | ë³´ë¼ | #8B5CF6 |
| mobile | ì´ˆë¡ | #10B981 |
| external | ì£¼í™© | #F59E0B |

**ë™ì  ìƒ‰ìƒ ìƒì„±:**

```javascript
// HSL ê¸°ë°˜ ìƒ‰ìƒ ìƒì„±
function getGroupColor(groupName) {
  const hash = hashString(groupName);
  const hue = hash % 360;        // ìƒ‰ì¡°
  const saturation = 65;          // ì±„ë„ (ê³ ì •)
  const lightness = 55;           // ëª…ë„ (ê³ ì •)
  return `hsl(${hue}, ${saturation}%, ${lightness}%)`;
}
```

### 3.3 Swagger UI ì—°ë™

ë³€ê²½ ì¹´ë“œ í´ë¦­ ì‹œ Swagger UIì—ì„œ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•©ë‹ˆë‹¤.

**ë™ì‘ ìˆœì„œ:**

1. ë³€ê²½ ì¹´ë“œ í´ë¦­
2. ê²½ë¡œì—ì„œ HTTP ë©”ì„œë“œì™€ path ì¶”ì¶œ
3. Swagger UIì—ì„œ í•´ë‹¹ operation ì°¾ê¸°
4. ìŠ¤í¬ë¡¤ ë° í•˜ì´ë¼ì´íŠ¸ ì ìš©
5. operation ë¸”ë¡ ìë™ í¼ì¹¨

**í•˜ì´ë¼ì´íŠ¸ ìŠ¤íƒ€ì¼:**

```css
.opblock.highlighted {
  background-color: #FFFBEB !important;  /* ë…¸ë€ìƒ‰ ë°°ê²½ */
  border: 2px solid #F59E0B !important;
  transition: all 0.3s ease;
}
```

### 3.4 í† ìŠ¤íŠ¸ ì•Œë¦¼

í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ì— í‘œì‹œë˜ëŠ” ì•Œë¦¼ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                                         â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                       â”‚ âœ“ ì €ì¥ ì™„ë£Œ!   â”‚ â”‚
â”‚                       â”‚   5ì´ˆ í›„ ì‚¬ë¼ì§ â”‚ â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íƒ€ì…ë³„ ìŠ¤íƒ€ì¼:**

| íƒ€ì… | ì•„ì´ì½˜ | ìƒ‰ìƒ |
|------|--------|------|
| success | âœ“ | ğŸŸ¢ ì´ˆë¡ |
| error | âœ— | ğŸ”´ ë¹¨ê°• |
| info | â„¹ | ğŸ”µ íŒŒë‘ |

**ë™ì‘:**
- ìë™ ì‚¬ë¼ì§: 5ì´ˆ í›„
- ìˆ˜ë™ ë‹«ê¸°: í´ë¦­ ë˜ëŠ” X ë²„íŠ¼
- ë³µìˆ˜ ì•Œë¦¼: ìŠ¤íƒ í˜•íƒœë¡œ ìŒ“ì„

### 3.5 ë³€ê²½ì‚¬í•­ íƒ€ì„ë¼ì¸

ë²„ì „ íˆìŠ¤í† ë¦¬ì—ì„œ ë³€ê²½ì‚¬í•­ì„ ì‹œê°„ìˆœìœ¼ë¡œ ê·¸ë£¹í™”í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… 2024-11-27 10:00                     â”‚
â”‚ â”œâ”€ ğŸŸ¢ POST /api/users ì¶”ê°€              â”‚
â”‚ â”œâ”€ ğŸŸ¢ GET /api/users/{id} ì¶”ê°€          â”‚
â”‚ â””â”€ ğŸŸ  GET /api/users limit ë³€ê²½         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… 2024-11-26 15:30                     â”‚
â”‚ â”œâ”€ ğŸ”´ DELETE /api/old-endpoint ì‚­ì œ     â”‚
â”‚ â””â”€ ğŸŸ¢ PUT /api/users/{id} ì¶”ê°€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê·¸ë£¹í™” ê¸°ì¤€:**
- `recordedAt` íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ì¤€
- ë™ì¼ ë‚ ì§œ/ì‹œê°„ëŒ€ ë³€ê²½ì‚¬í•­ ê·¸ë£¹í™”

### 3.6 ì•„ì½”ë””ì–¸ UI

ë³€ê²½ì‚¬í•­ì„ íƒ€ì…ë³„ë¡œ ê·¸ë£¹í™”í•˜ì—¬ í¼ì¹¨/ì ‘ìŒ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ ì¶”ê°€ë¨ (5)                     [â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ [POST] /api/users                     â”‚
â”‚ â”‚ ì‚¬ìš©ì ìƒì„± ì—”ë“œí¬ì¸íŠ¸                  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â”‚ [GET] /api/users/{id}                 â”‚
â”‚ â”‚ ì‚¬ìš©ì ì¡°íšŒ ì—”ë“œí¬ì¸íŠ¸                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ ì‚­ì œë¨ (2)                     [â–¶]  â”‚  â† ì ‘íŒ ìƒíƒœ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ  ìˆ˜ì •ë¨ (3)                     [â–¶]  â”‚  â† ì ‘íŒ ìƒíƒœ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ì„±ëŠ¥ ìµœì í™”

### 4.1 ë””ë°”ìš´ì‹±

ê²€ìƒ‰ ì…ë ¥ ì‹œ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•©ë‹ˆë‹¤.

```javascript
// 300ms ë””ë°”ìš´ì‹±
let debounceTimer;
searchInput.addEventListener('input', () => {
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(() => {
    loadUrls();  // API í˜¸ì¶œ
  }, 300);
});
```

### 4.2 í˜ì´ì§€ë„¤ì´ì…˜

ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤.

```javascript
// ê¸°ë³¸ê°’
{
  page: 1,
  limit: 20
}

// ì‘ë‹µ ë©”íƒ€
{
  total: 150,
  page: 1,
  limit: 20,
  totalPages: 8
}
```

### 4.3 Lean ì¿¼ë¦¬

MongoDB ì¡°íšŒ ì‹œ ë¶ˆí•„ìš”í•œ Mongoose ê¸°ëŠ¥ì„ ì œì™¸í•©ë‹ˆë‹¤.

```javascript
// ì¼ë°˜ ì¿¼ë¦¬ (Mongoose Document ë°˜í™˜)
const doc = await Model.findById(id);

// Lean ì¿¼ë¦¬ (Plain JavaScript Object ë°˜í™˜)
const doc = await Model.findById(id).lean();
```

**ì¥ì :**
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°ì†Œ
- ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
- ìˆ˜ì •ì´ í•„ìš” ì—†ëŠ” ì¡°íšŒì— ì í•©

### 4.4 ë³‘ë ¬ ì¿¼ë¦¬

ë…ë¦½ì ì¸ ì¿¼ë¦¬ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

```javascript
// ìˆœì°¨ ì‹¤í–‰ (ëŠë¦¼)
const urls = await ApiUrl.find();
const versions = await ApiVersion.find();

// ë³‘ë ¬ ì‹¤í–‰ (ë¹ ë¦„)
const [urls, versions] = await Promise.all([
  ApiUrl.find(),
  ApiVersion.find()
]);
```

---

## 5. ë³´ì•ˆ ê¸°ëŠ¥

### 5.1 CORS ì„¤ì •

í—ˆìš©ëœ ë„ë©”ì¸ë§Œ API ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```javascript
app.use(cors({
  origin: process.env.CORS_ORIGIN  // í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •
}));
```

### 5.2 Body í¬ê¸° ì œí•œ

ëŒ€ìš©ëŸ‰ ìš”ì²­ì„ ì œí•œí•©ë‹ˆë‹¤.

```javascript
app.use(express.json({ limit: '10mb' }));
```

### 5.3 XSS ë°©ì–´

ì‚¬ìš©ì ì…ë ¥ì„ HTMLì— ë Œë”ë§í•  ë•Œ ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```javascript
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}
```

### 5.4 ì…ë ¥ ê²€ì¦

Joi ìŠ¤í‚¤ë§ˆë¡œ API ì…ë ¥ì„ ê²€ì¦í•©ë‹ˆë‹¤.

```javascript
const schema = Joi.object({
  name: Joi.string().max(100).required(),
  url: Joi.string().uri().required(),
  group: Joi.string().required(),
  description: Joi.string().max(500)
});
```

---

## 6. ë¡œê¹… ë° ê°ì‚¬

### 6.1 HTTP ìš”ì²­ ë¡œê¹…

Morgan ë¯¸ë“¤ì›¨ì–´ë¡œ HTTP ìš”ì²­ì„ ë¡œê¹…í•©ë‹ˆë‹¤.

```
GET /api/urls 200 12.345 ms
POST /api/urls/65432.../fetch 201 234.567 ms
```

### 6.2 ê°ì‚¬ ë¡œê·¸

ì£¼ìš” ì‘ì—…ì„ AuditLog ì»¬ë ‰ì…˜ì— ê¸°ë¡í•©ë‹ˆë‹¤.

**ê¸°ë¡ í•­ëª©:**
- Swagger fetch ê²°ê³¼
- URL ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- ë²„ì „ ìƒì„±
- ì˜¤ë¥˜ ë°œìƒ

**ìë™ ì‚­ì œ:**
- TTL ì¸ë±ìŠ¤ë¡œ 90ì¼ í›„ ìë™ ì‚­ì œ

---

## 7. ì—ëŸ¬ í•¸ë“¤ë§

### 7.1 AppError í´ë˜ìŠ¤

êµ¬ì¡°í™”ëœ ì—ëŸ¬ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```javascript
throw new AppError(
  'URLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',  // message
  404,                        // statusCode
  'NOT_FOUND',                // errorCode
  [{ field: 'id', message: 'ìœ íš¨í•˜ì§€ ì•Šì€ ID' }]  // details
);
```

### 7.2 ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬

ëª¨ë“  ì—ëŸ¬ë¥¼ ì¼ê´€ëœ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.

```javascript
{
  "success": false,
  "error": {
    "code": "NOT_FOUND",
    "message": "URLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
    "details": [
      { "field": "id", "message": "ìœ íš¨í•˜ì§€ ì•Šì€ ID" }
    ]
  }
}
```

### 7.3 Swagger Fetch ì—ëŸ¬

| ì—ëŸ¬ ìƒí™© | ì²˜ë¦¬ |
|----------|------|
| 404 Not Found | "Swagger ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" |
| ì—°ê²° ê±°ë¶€ | "ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤" |
| íƒ€ì„ì•„ì›ƒ | "ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤" |
| ì˜ëª»ëœ JSON | "ìœ íš¨í•˜ì§€ ì•Šì€ Swagger/OpenAPI í˜•ì‹" |

---

â† [ì´ì „: ì•„í‚¤í…ì²˜](./architecture.md) | [ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](./README.md) â†’
